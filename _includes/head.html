<!-- Cookie Consent y Google Analytics -->
<script>
  /* --- Google Analytics se cargará sólo tras el consentimiento --- */
  window.dataLayer = window.dataLayer || [];
  function gtag(){ dataLayer.push(arguments); }

  function loadGA () {
    var s = document.createElement('script');
    s.async = true;
    s.src   = 'https://www.googletagmanager.com/gtag/js?id=G-5309GK77Y4';
    s.onload = function () {
      gtag('js',  new Date());
      gtag('config', 'G-5309GK77Y4');
    };
    document.head.appendChild(s);
  }
</script>

<!-- Hoja de estilo y script de Cookie Consent (v3) -->
<link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" defer></script>

<script>
  /* --- Inicialización tras la carga --- */
  window.addEventListener('load', function () {
    window.cookieconsent.initialise({
      palette: {
        popup:  { background: '#4a2e0e' },
        button: { background: '#b87333' }
      },
      theme: 'classic',
      content: {
        message: 'Este sitio usa cookies para análisis anónimos.',
        dismiss: 'Aceptar',
        link:    'Más info',
        href:    'https://policies.google.com/technologies/cookies?hl=es'
      },
      onStatusChange: function (status) {
        if (this.hasConsented()) {
          loadGA();   // carga Google Analytics sólo si acepta
        }
      }
    });
  });
</script>
