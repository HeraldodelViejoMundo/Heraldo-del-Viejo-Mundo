<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>{{ page.title }}</title>
  {% seo %}
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Estilos del tema minima -->
  <link rel="stylesheet" href="{{ "/assets/main.css" | relative_url }}">

  <!-- Nuestro CSS personalizado -->
  <link rel="stylesheet" href="{{ "/assets/custom.css" | relative_url }}">

  <!-- Hoja de estilo de Cookie Consent (v3) -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
</head>

<body>
  <!-- Google Analytics (G-5309GK77Y4) se cargará tras el consentimiento -->
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }

    function loadGA () {
      var s = document.createElement('script');
      s.async = true;
      s.src   = 'https://www.googletagmanager.com/gtag/js?id=G-5309GK77Y4';
      s.onload = function () {
        gtag('js', new Date());
        gtag('config', 'G-5309GK77Y4');
      };
      document.head.appendChild(s);
    }
  </script>

  <!-- Script de Cookie Consent (deferred para ejecutarse tras parsear el HTML) -->
  <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" defer></script>

  <!-- Inicialización de Cookie Consent -->
  <script>
    window.addEventListener('load', function () {
window.cookieconsent.initialise({
      palette: {
        popup:  { background: '#4a2e0e' },
        button: { background: '#b87333' }
      },
      theme: 'classic',

      /* Modo “opt-in” para pedir consentimiento explícito */
      type: 'opt-in',

      content: {
        message: 'Este sitio usa cookies para análisis anónimos.',
        allow:   'Aceptar',
        deny:    'Rechazar',
        link:    'Más info',
        href:    'https://policies.google.com/technologies/cookies?hl=es'
      },

      onStatusChange: function () {
        if (this.hasConsented()) {   // solo carga GA si acepta
          loadGA();
        }
      }
    });


  </script>

  <div class="page-content">
    {{ content }}
  </div>
</body>
</html>
